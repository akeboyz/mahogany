<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Main Menu</title>
  <link rel="stylesheet" href="css/menu.css" />
</head>
<body>
  <div class="video-grid">
    <!-- ‚úÖ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏ñ‡∏ß -->
    <video class="video-top" src="menu-vdo/project.mp4" autoplay muted loop playsinline></video>

    <!-- ‚úÖ 6 ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö 2 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå 3 ‡πÅ‡∏ñ‡∏ß -->
    <video src="menu-vdo/delivery.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=delivery')"></video>
    <video src="menu-vdo/deal.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=deal')"></video>
    <video src="menu-vdo/dining.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=dining')"></video>
    <video src="menu-vdo/daily.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=daily')"></video>
    <video src="menu-vdo/juristic.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=juristic')"></video>
    <video src="menu-vdo/ondemand.mp4" autoplay muted loop playsinline onclick="navigate('category.html?type=ondemand')"></video>
  </div>

  <script>
    // ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ö‡∏ô iOS/macOS
    const isIOS = /iPad|iPhone|Macintosh/.test(navigator.userAgent);
    const allVideos = document.querySelectorAll('video');
    allVideos.forEach(v => {
      if (isIOS) v.muted = true;
      v.setAttribute('muted', '');
    });

    // ‚úÖ ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤ category ‡∏ï‡∏≤‡∏° type
    function navigate(url) {
      location.href = url;
    }

    // ‚úÖ ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå Auto Return ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏∞‡∏à‡∏≠‡πÄ‡∏Å‡∏¥‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ
    let timeout;
    function resetInactivityTimer() {
      clearTimeout(timeout);
      timeout = setTimeout(() => {
        window.location.href = 'index.html';
      }, 60000); // 1 ‡∏ô‡∏≤‡∏ó‡∏µ = 60,000 ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    }

    // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏∞‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏ß‡∏•‡∏≤
    window.addEventListener('click', resetInactivityTimer);
    window.addEventListener('touchstart', resetInactivityTimer);
    window.addEventListener('mousemove', resetInactivityTimer);

    // ‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    resetInactivityTimer();
  </script>

  <!-- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á ‚Üí ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà -->
  <script>
    window.currentVersion = '';

    setInterval(() => {
      fetch('/version.txt', { cache: 'no-store' })
        .then(res => res.text())
        .then(serverVersion => {
          if (window.currentVersion && window.currentVersion !== serverVersion.trim()) {
            console.log('üîÅ New version detected ‚Üí Reloading...');
            location.reload();
          }
          window.currentVersion = serverVersion.trim();
        });
    }, 60000);
  </script>
</body>
</html>